# This config file is auto-generated by chef
# please don't modify manually

DAEMON="<%= @daemon_path %>"
NAME="<%= @name %>"

DAEMON_OPTS=""

<% if @bind_ip -%>
DAEMON_OPTS="$DAEMON_OPTS --bind_ip <%= @bind_ip %>"
<% end -%>
<%= @port ? "DAEMON_OPTS=\"$DAEMON_OPTS --port #{@port}\"" : "" %>
<%= @dbpath ? "DAEMON_OPTS=\"$DAEMON_OPTS --dbpath #{@dbpath}\"" : "" %>
<%= @logpath ? "DAEMON_OPTS=\"$DAEMON_OPTS --logpath #{@logpath}\"" : "" %>

<%= @config ? "DAEMON_OPTS=\"$DAEMON_OPTS --config #{@config}\"" : "" %>
<%= @configdb ? "DAEMON_OPTS=\"$DAEMON_OPTS --configdb #{@configsrv_replicaset_name}/#{@configdb}\"" : "" %>

<%= @configsrv ? "DAEMON_OPTS=\"$DAEMON_OPTS --configsvr\"" : "" %>
<%= @shardsrv ? "DAEMON_OPTS=\"$DAEMON_OPTS --shardsvr\"" : "" %>

<%= @nojournal ? "DAEMON_OPTS=\"$DAEMON_OPTS --nojournal\"" : "" %>

<%= @directoryperdb ? "DAEMON_OPTS=\"$DAEMON_OPTS --directoryperdb\"" : "" %>

<% if @replicaset_name %>
DAEMON_OPTS="$DAEMON_OPTS --replSet <%= @replicaset_name %>"
<% end %>

<% if @enable_rest %>
DAEMON_OPTS="$DAEMON_OPTS --rest"
<% end %>

<% if @smallfiles %>
DAEMON_OPTS="$DAEMON_OPTS --smallfiles"
<% end %>

<% if @noprealloc %>
DAEMON_OPTS="$DAEMON_OPTS --noprealloc"
<% end %>

<%= @slowms ? "DAEMON_OPTS=\"$DAEMON_OPTS --slowms #{@slowms}\"" : "" %>

<%= @oplog_size ? "DAEMON_OPTS=\"$DAEMON_OPTS --oplogSize #{@oplog_size}\"" : "" %>

<% if %w( rhel fedora ).include? node['platform_family'] -%>
DAEMON_OPTS="$DAEMON_OPTS --fork"
DBPATH="<%= @dbpath %>"
<% end -%>

DAEMON_OPTS="$DAEMON_OPTS --pidfilepath <%= @pidfile %>"

<% if node['mongodb']['extra_shard_options'] != nil %>
DAEMON_OPTS="$DAEMON_OPTS <%= node['mongodb']['extra_shard_options'] %>"
<% end %>

DAEMONUSER=<%= node['mongodb']['user'] %>

PORT="<%= @port %>"
